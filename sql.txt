SELECT
    ins.name AS template_term_name
  , st.name AS scheduled_term_name
  , st.start_date
  , st.end_Date
  , atr1.name AS tracker_name_1
  , JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[0].actionTracker')) AS payout_tracker_1
  , atr2.name AS tracker_name_2
  , JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[1].actionTracker')) AS payout_tracker_2
  , atr3.name AS tracker_name_3
  , JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[2].actionTracker')) AS payout_tracker_3
  , atr4.name AS tracker_name_4
  , JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[3].actionTracker')) AS payout_tracker_4
  , st.archived
  , st.doe
  , st.uoe
  , st.dlu
  , st.ulu
FROM ircm_scheduled_terms st
INNER JOIN ircm_insertionorder ins
  ON ins.id = st.ircm_insertionorder_id

LEFT JOIN ircm_actiontracker atr1
  ON atr1.ircm_campaign_id = st.ircm_campaign_id
 AND atr1.id = JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[0].actionTracker'))

LEFT JOIN ircm_actiontracker atr2
  ON atr2.ircm_campaign_id = st.ircm_campaign_id
 AND atr2.id = JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[1].actionTracker'))

LEFT JOIN ircm_actiontracker atr3
  ON atr3.ircm_campaign_id = st.ircm_campaign_id
 AND atr3.id = JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[2].actionTracker'))

LEFT JOIN ircm_actiontracker atr4
  ON atr4.ircm_campaign_id = st.ircm_campaign_id
 AND atr4.id = JSON_UNQUOTE(JSON_EXTRACT(CAST(st.payout_json AS JSON), '$.actionTrackers[3].actionTracker'))

WHERE st.ircm_campaign_id = 5048
-- AND st.start_date >= NOW()     -- uncomment for upcoming-only
ORDER BY st.start_date DESC;
+--------------------+---------------------+------------+----------+----------------+------------------+----------------+------------------+----------------+------------------+----------------+------------------+----------+-----+-----+-----+-----+
| template_term_name | scheduled_term_name | start_date | end_Date | tracker_name_1 | payout_tracker_1 | tracker_name_2 | payout_tracker_2 | tracker_name_3 | payout_tracker_3 | tracker_name_4 | payout_tracker_4 | archived | doe | uoe | dlu | ulu |
+--------------------+---------------------+------------+----------+----------------+------------------+----------------+------------------+----------------+------------------+----------------+------------------+----------+-----+-----+-----+-----+
+--------------------+---------------------+------------+----------+----------------+------------------+----------------+------------------+----------------+------------------+----------------+------------------+----------+-----+-----+-----+-----+





SELECT
  u.account_user_id,
  ce.username,
  ce.email,
  cr.id   AS role_id,
  cr.name AS role_name,
  cr.permissionType,
  cr.description
FROM iram_usership u
JOIN core_estaleauser ce
  ON ce.id = u.account_user_id
JOIN core_ap_role car
  ON car.core_ap_id = u.authorizationPrincipal_id
JOIN core_role cr
  ON cr.id = car.core_role_id
WHERE u.irAccount_Id = 344628
  AND u.account_user_id IN (374965, 6763885)
ORDER BY u.account_user_id, cr.name;
+-----------------+----------+-------+---------+-----------+----------------+-------------+
| account_user_id | username | email | role_id | role_name | permissionType | description |
+-----------------+----------+-------+---------+-----------+----------------+-------------+
+-----------------+----------+-------+---------+-----------+----------------+-------------+



SELECT
  u.account_user_id,
  ce.username,
  cr.name AS role_name,
  cp.code AS permission_code,
  cp.name AS permission_name
FROM iram_usership u
JOIN core_estaleauser ce
  ON ce.id = u.account_user_id
JOIN core_ap_role car
  ON car.core_ap_id = u.authorizationPrincipal_id
JOIN core_role cr
  ON cr.id = car.core_role_id
JOIN core_role_permission crp
  ON crp.core_role_id = cr.id
JOIN core_permission cp
  ON cp.id = crp.core_permission_id
WHERE u.irAccount_Id = 344628
  AND u.account_user_id IN (374965, 6763885)
  AND cp.code IN (
    'PERMISSION_NEGOTIATE_AGREEMENTS',
    'PERMISSION_NEGOTIATE_AGREEMENTS_CREATOR'
  )
ORDER BY u.account_user_id, role_name, permission_code;
+-----------------+----------+-----------+-----------------+-----------------+
| account_user_id | username | role_name | permission_code | permission_name |
+-----------------+----------+-----------+-----------------+-----------------+
+-----------------+----------+-----------+-----------------+-----------------+