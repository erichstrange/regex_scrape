SELECT EXISTS (
  SELECT 1
  FROM iram_usership u
  JOIN core_ap_role ar ON ar.core_ap_id  = u.authorizationPrincipal_id
  JOIN core_role   r   ON r.id           = ar.core_role_id
  WHERE u.irAccount_id = 6613564
    AND r.name = 'Account Administration'
    AND u.state = 'ACTIVE'         -- optional but usually desired
) AS has_admin_role;


SELECT EXISTS (
  SELECT 1
  FROM iram_usership u
  JOIN core_ap_role ar ON ar.core_ap_id = u.authorizationPrincipal_id
  WHERE u.irAccount_id = 6613564
    AND ar.core_role_id = 17
    AND u.state = 'ACTIVE'
) AS has_admin_role;


SELECT
  u.account_user_id,
  u.authorizationPrincipal_id,
  u.state,
  r.id   AS role_id,
  r.name AS role_name
FROM iram_usership u
JOIN core_ap_role ar ON ar.core_ap_id  = u.authorizationPrincipal_id
JOIN core_role   r   ON r.id           = ar.core_role_id
WHERE u.irAccount_id = 6613564
  AND r.name = 'Account Administration'
  AND u.state = 'ACTIVE';
